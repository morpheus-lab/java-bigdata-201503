<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>사원 정보</title>
	<script type="text/javascript">
		
		function createRequest() {
			var request = null;
			try {
				request = new XMLHttpRequest();
			} catch (trymicrosoft) {
				try {
					request = new ActiveXObject("Msxml2.XMLHTTP");
				} catch (othermicrosoft) {
					try {
						request = new ActiveXObject("Microsoft.XMLHTTP");
					} catch (failed) {
						request = null;
					}
				}
			}

			if (request == null) {
				alert("Error creating request object!");
			} else {
				return request;
			}
		}

		var request = createRequest();
		
		function queryUserId(input) {
			// 입력된 텍스트
			var inputText = input.value.trim();
			if (inputText) {
				var url = 'queryUserId.jsp';
				var data = 'userid=' + encodeURIComponent(inputText);
				
				request.open('POST', url, true);
				request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
				request.onreadystatechange = function() {
					if (request.readyState == 4) {
						if (request.status == 200) {
							// 정상응답
							var result = request.responseText;
							console.log(result);
							
							var empArr = JSON.parse(result);
							console.log(empArr);
						} else {
							// 에러
						}
					}
				};
				request.send(data);
			}
		}
	</script>
</head>
<body>
	<table border="1">
		<tr>
			<td>User ID</td>
			<td><input type="text" onkeyup="queryUserId(this)"></td>
		</tr>
		<tr>
			<td>이름</td>
			<td id="emp_name"></td>
		</tr>
		<tr>
			<td>직함</td>
			<td id="emp_title"></td>
		</tr>
		<tr>
			<td>부서명</td>
			<td id="dept_name"></td>
		</tr>
		<tr>
			<td>급여</td>
			<td id="emp_sal"></td>
		</tr>
	</table>
</body>
</html>